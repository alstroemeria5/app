cmake_minimum_required(VERSION 3.17)
project(acme CXX)

set(CMAKE_CXX_STANDARD 14)
set(CMAKE_CXX_EXTENSIONS OFF)


message(STATUS "CMAKE_SYSTEM_NAME is ${CMAKE_SYSTEM_NAME}")


if(${CMAKE_SYSTEM_NAME} STREQUAL "Linux")
    set(LINUX TRUE)
    set(PLATFORM_NAME "linux")
    include(FindPkgConfig)
elseif(WIN32)
    set(PLATFORM_NAME "windows")
endif()


set(LIBRARY_OUTPUT_PATH ${CMAKE_CURRENT_SOURCE_DIR}/../../../time-${PLATFORM_NAME}/cmake)
set(EXECUTABLE_OUTPUT_PATH ${CMAKE_CURRENT_SOURCE_DIR}/../../../time-${PLATFORM_NAME}/cmake)


list(APPEND acme_source
        compress/zip/api.cpp
        compress/zip/file.cpp
        compress/zip/in_file.cpp
        compress/zip/ioapi.cpp
        compress/zip/memory_buffer.cpp
        compress/zip/unzip.cpp
        compress/zip/zip.cpp
        compress/gz.cpp
        const/idpool.cpp
        exception/-ehrror.cpp
        exception/-last_ehrror.cpp
        exception/-overflow_ehrror.cpp
        exception/-range_ehrror.cpp
        exception/-runtime_ehrror.cpp
        exception/archive.cpp
        exception/archive_exception.cpp
        exception/base.cpp
        exception/callstack.cpp
        exception/cancel.cpp
        exception/const.cpp
        exception/debug.cpp
        exception/dump.cpp
        exception/dump_context.cpp
        exception/dump_floating_point.cpp
        exception/dump_output.cpp
        exception/exception.cpp
        exception/exception_engine.cpp
        exception/exit.cpp
        exception/hresult.cpp
        exception/installing.cpp
        exception/interface_only.cpp
        exception/invalid_argument.cpp
        exception/invalid_character.cpp
        exception/invalid_handle.cpp
        exception/invalid_index.cpp
        exception/io.cpp
        exception/memory.cpp
        exception/not_implemented.cpp
        exception/not_installed.cpp
        exception/not_licensed.cpp
        exception/not_supported.cpp
        exception/operation_canceled.cpp
        exception/os.cpp
        exception/parsing.cpp
        exception/resource.cpp
        exception/result.cpp
        exception/simple.cpp
        exception/standard_translator.cpp
        exception/temporary.cpp
        exception/throw.cpp
        exception/todo.cpp
        exception/user.cpp
        exception/void_implementation.cpp
        exception/wtf.cpp
        filesystem/file/_.cpp
        filesystem/file/binary_stream.cpp
        filesystem/file/buffered_buffer.cpp
        filesystem/file/c.cpp
        filesystem/file/circular_buffer.cpp
        filesystem/file/composite.cpp
        filesystem/file/cpp.cpp
        filesystem/file/dir.cpp
        filesystem/file/dir2.cpp
        filesystem/file/exception.cpp
        filesystem/file/file.cpp
        filesystem/file/item.cpp
        filesystem/file/item_array.cpp
        filesystem/file/memory_file.cpp
        filesystem/file/memory_map.cpp
        filesystem/file/path.cpp
        filesystem/file/seekable.cpp
        filesystem/file/serializable.cpp
        filesystem/file/serialize.cpp
        filesystem/file/stdio_file.cpp
        filesystem/file/stream.cpp
        filesystem/file/string_file.cpp
        filesystem/file/text_file.cpp
        filesystem/file/text_stream.cpp
        filesystem/file/var_stream.cpp
        filesystem/filesystem/listing.cpp
        filesystem/filesystem/path.cpp
        filesystem/filesystem/path_object.cpp
        graphics/draw2d/_.cpp
        graphics/draw2d/color.cpp
        graphics/draw2d/colorref_array.cpp
        include/_.cpp
        memory/alloc.cpp
        memory/allocate_mid_big.cpp
        memory/allocate_processor_cache_oriented.cpp
        memory/allocate_system_heap.cpp
        memory/allocate_x86_cache_oriented.cpp
        memory/allocation.cpp
        memory/heap.cpp
        memory/new.cpp
        memory/plex.cpp
        memory/plex_heap1.cpp
        multithreading/_.cpp
        multithreading/condition.cpp
        multithreading/critical_section.cpp
        multithreading/event.cpp
        multithreading/file_change_event.cpp
        multithreading/manual_reset_event.cpp
        multithreading/mq.cpp
        multithreading/multi_lock.cpp
        multithreading/mutex.cpp
        multithreading/pool.cpp
        multithreading/pred_holder.cpp
        multithreading/procedure_array.cpp
        multithreading/semaphore.cpp
        multithreading/single_lock.cpp
        multithreading/socket_event.cpp
        multithreading/sync.cpp
        multithreading/sync_array.cpp
        multithreading/sync_future.cpp
        multithreading/sync_method.cpp
        multithreading/sync_result.cpp
        multithreading/sync_task.cpp
        multithreading/task.cpp
        multithreading/thread.cpp
        multithreading/thread_os.cpp
        multithreading/waitable.cpp
        os/ansios/base.cpp
        os/ansios/datetime.cpp
        os/ansios/exception_engine.cpp
        os/ansios/file.cpp
        os/ansios/file_raw.cpp
        os/ansios/file_std.cpp
        os/ansios/language.cpp
        os/ansios/memory.cpp
        os/ansios/process.cpp
        os/ansios/user.cpp
        os/ansios/win.cpp
        os/_.cpp
        os/argcargv.cpp
        os/chronometer.cpp
        os/console.cpp
        os/debug.cpp
        os/file.cpp
        os/http.cpp
        os/process.cpp
        os/thread.cpp
        os/time.cpp
        os/windowing.cpp
        platform/_.cpp
        platform/assert.cpp
        platform/aura_str_pool.cpp
        platform/build_debug.cpp
        platform/checked.cpp
        platform/debug.cpp
        platform/display.cpp
        platform/exclusive.cpp
        platform/factory.cpp
        platform/fixed_alloc.cpp
        platform/flags.cpp
        platform/hyperlink.cpp
        platform/international.cpp
        platform/logic.cpp
        platform/lparam.cpp
        platform/math.cpp
        platform/message_box.cpp
        platform/muldiv64.cpp
        platform/net.cpp
        platform/obj_ref_dbg.cpp
        platform/obj_typ_ctr.cpp
        platform/printf.cpp
        platform/profiler.cpp
        platform/regex.cpp
        platform/sprintf.cpp
        platform/static_start.cpp
        platform/static_start_aura.cpp
        platform/system.cpp
        platform/text.cpp
        platform/timer.cpp
        platform/timer_array.cpp
        platform/timer_callback.cpp
        platform/timer_event.cpp
        platform/timer_item.cpp
        platform/timer_task.cpp
        platform/trace_category.cpp
        platform/update.cpp
        platform/version.cpp
        primitive/collection/2d_array.cpp
        primitive/collection/array.cpp
        primitive/collection/bit_array.cpp
        primitive/collection/class_sort_array.cpp
        primitive/collection/comparable_array.cpp
        primitive/collection/event_map.cpp
        primitive/collection/id_array.cpp
        primitive/collection/key_sort_array.cpp
        primitive/collection/map_misc.cpp
        primitive/collection/map_test_51778915.cpp
        primitive/collection/numeric_array.cpp
        primitive/collection/point_array.cpp
        primitive/collection/rect_array.cpp
        primitive/collection/sort.cpp
        primitive/collection/string_array_base.cpp
        primitive/collection/string_list.cpp
        primitive/collection/string_to_string_map.cpp
        primitive/collection/stringa.cpp
        primitive/collection/stringl.cpp
        primitive/collection/var_array.cpp
        primitive/comparison/var_strict.cpp
        primitive/datetime/_.cpp
        primitive/datetime/_c.cpp
        primitive/datetime/date_span.cpp
        primitive/datetime/datetime.cpp
        primitive/datetime/duration.cpp
        primitive/datetime/filetime.cpp
        primitive/datetime/filetime_span.cpp
        primitive/datetime/mktime.cpp
        primitive/datetime/time.cpp
        primitive/datetime/time_span.cpp
        primitive/datetime/value.cpp
        primitive/datetime/zonetime.cpp
        primitive/geometry2d/_.cpp
        primitive/geometry2d/geometry.cpp
        primitive/geometry2d/point.cpp
        primitive/geometry2d/rect.cpp
        primitive/geometry2d/shape.cpp
        primitive/geometry2d/size.cpp
        primitive/geometry2d/types.cpp
        primitive/geometry3d/box.cpp
        primitive/geometry3d/location.cpp
        primitive/math/binary_operation.cpp
        primitive/math/cast.inl
        primitive/math/cvt.cpp
        primitive/math/cvt_g.cpp
        primitive/math/int_biunique.cpp
        primitive/math/math.cpp
        primitive/math/mkint_c.cpp
        primitive/math/natural.cpp
        primitive/math/number.cpp
        primitive/math/number_double.cpp
        primitive/math/number_float.cpp
        primitive/math/number_integer.cpp
        primitive/math/random_number_generator.cpp
        primitive/math/scalar.cpp
        primitive/math/value.cpp
        primitive/primitive/_.cpp
        primitive/primitive/action.cpp
        primitive/primitive/application_bias.cpp
        primitive/primitive/bit.cpp
        primitive/primitive/block.cpp
        primitive/primitive/block.inl
        primitive/primitive/change.cpp
        primitive/primitive/command.cpp
        primitive/primitive/context_object.cpp
        primitive/primitive/context_object_traits.cpp
        primitive/primitive/edit.cpp
        primitive/primitive/element_array.cpp
        primitive/primitive/factory.cpp
        primitive/primitive/function.cpp
        primitive/primitive/future.cpp
        primitive/primitive/handler.cpp
        primitive/primitive/id.cpp
        primitive/primitive/id_array.cpp
        primitive/primitive/id_space.cpp
        primitive/primitive/interlocked_long.cpp
        primitive/primitive/interlocked_long_pulse.cpp
        primitive/primitive/layered.cpp
        primitive/primitive/match.cpp
        primitive/primitive/matter.cpp
        primitive/primitive/memory.cpp
        primitive/primitive/memory_base.cpp
        primitive/primitive/memory_c.cpp
        primitive/primitive/memory_container.cpp
        primitive/primitive/procedure.cpp
        primitive/primitive/promise.cpp
        primitive/primitive/property.cpp
        primitive/primitive/property_set.cpp
        primitive/primitive/property_set_composite.cpp
        primitive/primitive/property_set_papaya.cpp
        primitive/primitive/runnable.cpp
        primitive/primitive/shared_memory.cpp
        primitive/primitive/source.cpp
        primitive/primitive/traits.cpp
        primitive/primitive/type.cpp
        primitive/primitive/update.cpp
        primitive/primitive/var.cpp
        primitive/primitive/var_element.cpp
        primitive/primitive/virtual_memory.cpp
        primitive/primitive/work.cpp
        primitive/string/_.cpp
        primitive/string/_c.cpp
        primitive/string/_c_trait_ansi.cpp
        primitive/string/_c_trait_wide.cpp
        primitive/string/_conv_ansi.cpp
        primitive/string/_unicode.cpp
        primitive/string/_unicode16.cpp
        primitive/string/_unicode16_32.cpp
        primitive/string/_unicode32.cpp
        primitive/string/base64.cpp
        primitive/string/bstring.cpp
        primitive/string/ch.cpp
        primitive/string/ch_class.cpp
        primitive/string/dup.cpp
        primitive/string/from_integer.cpp
        primitive/string/hex.cpp
        primitive/string/international.cpp
        primitive/string/manager.cpp
        primitive/string/parse.cpp
        primitive/string/simple.cpp
        primitive/string/str.cpp
        primitive/string/string_ansi.cpp
        primitive/string/string_wide.cpp
        primitive/string/string_wide_conversion.cpp
        primitive/string/stringtow.cpp
        primitive/string/strw.cpp
        primitive/string/strx.cpp
        primitive/string/sz.cpp
        primitive/string/to_integer.cpp
        primitive/string/tokenizer.cpp
        primitive/string/x.cpp
        process/bidi_pipe.cpp
        process/exit_status.cpp
        process/pipe.cpp
        user/os_colors.cpp
        _.cpp
        __matter_ca2.cpp
        context_glx.cpp
        framework.cpp
        promise.cpp
        update.h)


list(APPEND acme_source
    application.h
    astr.h
    axispolicy/policy_objc.h
    axispolicy/policy_objcpp.h
    axispolicy/policy_winrt.h
    axispolicy/_.h
    axispolicy/_c.h
    callback.h
    compress/gz.h
    compress/zip/api.h
    compress/zip/crypt.h
    compress/zip/file.h
    compress/zip/impl.h
    compress/zip/in_file.h
    compress/zip/ioapi.h
    compress/zip/iowin32.h
    compress/zip/memory_buffer.h
    compress/zip/unzip.h
    compress/zip/_.h
    compress/zip/_internal.h
    compress/_.h
    console.h
    const/charset.h
    const/check.h
    const/context.h
    const/future.h
    const/GLOBAL_ID.h
    const/id.h
    const/idpool.h
    const/impact.h
    const/message.h
    const/method.h
    const/simple_command.h
    const/source.h
    const/status.h
    const/status_range_authentication.h
    const/thread.h
    const/timer.h
    const/_const.h
    exception/assert.h
    exception/base.h
    exception/callstack.h
    exception/call_stack.h
    exception/cancel.h
    exception/debug.h
    exception/debug_stream.h
    exception/dump_context.h
    exception/engine.h
    exception/error.h
    exception/exception.h
    exception/exception2.h
    exception/exit.h
    exception/hresult.h
    exception/installing.h
    exception/interface_only.h
    exception/invalid_argument.h
    exception/invalid_character.h
    exception/invalid_handle.h
    exception/invalid_index.h
    exception/invalid_type.h
    exception/io.h
    exception/last_error.h
    exception/memory.h
    exception/misc.h
    exception/not_implemented.h
    exception/not_installed.h
    exception/not_licensed.h
    exception/not_supported.h
    exception/operation_canceled.h
    exception/os.h
    exception/overflow_error.h
    exception/parsing.h
    exception/range_error.h
    exception/resource.h
    exception/result.h
    exception/runtime_error.h
    exception/simple.h
    exception/standard.h
    exception/standard_translator.h
    exception/system.h
    exception/temporary.h
    exception/throw.h
    exception/todo.h
    exception/trap.h
    exception/unhandled_report.h
    exception/user.h
    exception/void_implementation.h
    exception/_.h
    exception/_c.h
    exception/_const.h
    exception/_dump_context.h
    filesystem/file/binary_stream.h
    filesystem/file/buffer.h
    filesystem/file/buffered_file.h
    filesystem/file/byte_stream.h
    filesystem/file/byte_stream_memory_file.h
    filesystem/file/circular_file.h
    filesystem/file/composite.h
    filesystem/file/cpp.h
    filesystem/file/dir.h
    filesystem/file/exception.h
    filesystem/file/file.h
    filesystem/file/file_stream1.h
    filesystem/file/item.h
    filesystem/file/item_array.h
    filesystem/file/listing_provider.h
    filesystem/file/memory_file.h
    filesystem/file/memory_map.h
    filesystem/file/opened.h
    filesystem/file/ostream_flush.h
    filesystem/file/path.h
    filesystem/file/primitive.h
    filesystem/file/serializable.h
    filesystem/file/serialize.h
    filesystem/file/status.h
    filesystem/file/stdio_file.h
    filesystem/file/stream.h
    filesystem/file/streamable.h
    filesystem/file/string_file.h
    filesystem/file/text_file.h
    filesystem/file/text_stream.h
    filesystem/file/transfer_file.h
    filesystem/file/var_stream.h
    filesystem/file/_.h
    filesystem/file/_c.h
    filesystem/file/_const.h
    filesystem/file/_defer.h
    filesystem/file/_defer_var_stream.h
    filesystem/file/_file.h
    filesystem/file/_impl.h
    filesystem/file/_papaya.h
    filesystem/file/_papaya_impl.h
    filesystem/file/_serializable_impl.h
    filesystem/file/_stream_process_impl.h
    filesystem/file/_text_stream_impl.h
    filesystem/file/_var_stream_impl.h
    filesystem/file/___serialization_draft.h
    filesystem/file/___serialization_draft001.h
    filesystem/filesystem/listing.h
    filesystem/filesystem/path.h
    filesystem/filesystem/path_object.h
    filesystem/filesystem/_.h
    filesystem/filesystem/_impl.h
    filesystem/filesystem.h
    filesystem/_impl.h
    framework.h
    framework_c.h
    graphics/draw2d/color.h
    graphics/draw2d/colorref_array.h
    graphics/draw2d/_.h
    graphics/draw2d/_const.h
    id.h
    include/objc.h
    include/objcpp.h
    include/winrt.h
    include/_.h
    include/_c.h
    include/_c_bridge.h
    include/_include.h
    include/_no_templates.h
    include/_setup.h
    inline/application.h
    inline/application_common.h
    inline/console.h
    inline/console_common.h
    inline/library.h
    inline/_acid_app_impl.h
    inline/_application.h
    inline/_app_impl1.h
    inline/_console_old.h
    inline/_draw2d_impl.h
    inline/_new_impl.h
    inline/__debug_box_clear_impl.h
    inline/__debug_box_set_impl.h
    ios_aura/ios_aura.h
    library.h
    memory/align_byte_count.h
    memory/allocate.h
    memory/allocate_processor_cache_oriented.h
    memory/allocation.h
    memory/heap_.h
    memory/heap_c.h
    memory/heap_item.h
    memory/heap_item_array.h
    memory/heap_memory.h
    memory/malloc.h
    memory/memory.h
    memory/memory_allocator.h
    memory/new.h
    memory/os_alloc.h
    memory/plex.h
    memory/plex_heap1.h
    memory/plex_heap_impl1.h
    memory/_heap.h
    multithreading/common.h
    multithreading/condition.h
    multithreading/create_thread.h
    multithreading/critical_section.h
    multithreading/data.h
    multithreading/event.h
    multithreading/file_change_event.h
    multithreading/initial_single_lock.h
    multithreading/manual_reset_event.h
    multithreading/mq.h
    multithreading/multi_lock.h
    multithreading/mutex.h
    multithreading/pool.h
    multithreading/pred_holder.h
    multithreading/pred_sync_procedure.h
    multithreading/procedure_array.h
    multithreading/semaphore.h
    multithreading/set_event_on_exit.h
    multithreading/single_lock.h
    multithreading/socket_event.h
    multithreading/sync.h
    multithreading/sync_array.h
    multithreading/sync_future.h
    multithreading/sync_lock.h
    multithreading/sync_method.h
    multithreading/sync_result.h
    multithreading/sync_task.h
    multithreading/task.h
    multithreading/thread_impl.h
    multithreading/thread_os.h
    multithreading/thread_parameter.h
    multithreading/zaa_update_task.h
    multithreading/zaa_update_task_item.h
    multithreading/zaa_update_task_item_array.h
    multithreading/_.h
    multithreading/_impl.h
    multithreading/_thread_os_create_impl.h
    multithreading/_types.h
    node/android/android1.h
    node/android/application.h
    node/android/buffer.h
    node/android/factory_exchange.h
    node/android/file.h
    node/android/implementation.h
    node/android/internal.h
    node/android/Kerr/kerr.h
    node/android/Kerr/LocalMemory.h
    node/android/thread.h
    node/android/_.h
    node/android/_android.h
    node/serial.h
    node/_.h
    node/_node.h
    os/android/cross_win_file.h
    os/android/cross_win_gdi.h
    os/android/cross_win_gdi_internal.h
    os/android/exception_engine.h
    os/android/file.h
    os/android/graphics.h
    os/android/internal.h
    os/android/process.h
    os/android/_.h
    os/android/_android.h
    os/android/_c.h
    os/android/_os_impl.h
    os/android/_os_local.h
    os/android/_os_object.h
    os/android/_os_remote.h
    os/ansios/ansios_file.h
    os/ansios/binreloc.h
    os/ansios/callstack.h
    os/ansios/datetime_c.h
    os/ansios/exception_engine.h
    os/ansios/file.h
    os/ansios/file_c.h
    os/ansios/file_raw.h
    os/ansios/multithreading.h
    os/ansios/pmutex_lock.h
    os/ansios/_.h
    os/ansios/_ansios.h
    os/ansios/_c.h
    os/apple/DDInvocationGrabber.h
    os/apple/debug.h
    os/apple/graphics.h
    os/apple/main.h
    os/apple/NSObject+DDExtensions.h
    os/apple/NSString+SymlinksAndAliases.h
    os/apple/ns_exception.h
    os/apple/time.h
    os/apple/UncaughtExceptionHandler.h
    os/apple/_.h
    os/apple/_apple.h
    os/apple/_c_mm.h
    os/apple/_mm.h
    os/apple/_mm_common.h
    os/chronometer.h
    os/console.h
    os/file.h
    os/graphics.h
    os/ios/base_internal.h
    os/ios/cross_win_gdi.h
    os/ios/exception_engine.h
    os/ios/gen_1.h
    os/ios/implementation.h
    os/ios/internal.h
    os/ios/mm_graphics.h
    os/ios/mm_oswindow.h
    os/ios/multithreading.h
    os/ios/oswindow_data.h
    os/ios/process.h
    os/ios/window.h
    os/ios/windowing.h
    "os/ios/window_boot 2.h"
    os/ios/window_boot.h
    os/ios/window_impl.h
    os/ios/_.h
    os/ios/_c.h
    os/ios/_ios.h
    os/ios/_m.h
    os/ios/_mm.h
    os/os_windowing2.h
    os/posix/mq_base.h
    os/process.h
    os/solaris/linux_internal.h
    os/solaris/solaris.h
    os/solaris/solaris_cairo_keep.h
    os/solaris/solaris_cross_win_file.h
    os/solaris/solaris_cross_win_gdi.h
    os/solaris/solaris_cross_win_gdi_internal.h
    os/solaris/solaris_debug.h
    os/solaris/solaris_file.h
    os/solaris/solaris_file_watcher.h
    os/solaris/solaris_graphics.h
    os/solaris/solaris_http.h
    os/solaris/solaris_http_lib.h
    os/solaris/solaris_internal.h
    os/solaris/solaris_process.h
    os/solaris/solaris_simple_ui.h
    os/solaris/solaris_solaris.h
    os/solaris/solaris_user_impl.h
    os/solaris/solaris_window_xlib.h
    os/text.h
    os/thread.h
    os/time.h
    os/user.h
    os/uwp/base_file.h
    os/uwp/exception_engine.h
    os/uwp/file_winrt.h
    os/uwp/gdi_winrt.h
    os/uwp/host_interaction.h
    os/uwp/metrowin_metrowin.h
    os/uwp/multithreading.h
    os/uwp/multithreading_winrt.h
    os/uwp/process.h
    os/uwp/simple_hold_handle.h
    os/uwp/simple_ui.h
    os/uwp/sockets.h
    os/uwp/_.h
    os/uwp/_uwp.h
    os/uwp/_winrt.h
    os/windows/api.h
    os/windows/callstack.h
    os/windows/d2d1_1.h
    os/windows/dir.h
    os/windows/environment_variable.h
    os/windows/exception_engine.h
    os/windows/extract_icon.h
    os/windows/file.h
    os/windows/handle.h
    os/windows/implementation.h
    os/windows/internal.h
    os/windows/itemidlist.h
    os/windows/port_forward.h
    os/windows/printer.h
    os/windows/print_job.h
    os/windows/process.h
    os/windows/process_data.h
    os/windows/registry.h
    os/windows/shell1.h
    os/windows/simple_hold_handle.h
    os/windows/thread.h
    os/windows/utils.h
    os/windows/windowing.h
    os/windows/_.h
    os/windows/_c.h
    os/windows/_windows.h
    os/windows/_windows_impl.h
    os/windows_common/bstring.h
    os/windows_common/comptr.h
    os/windows_common/cotaskptr.h
    os/windows_common/file.h
    os/windows_common/graphics.h
    os/windows_common/new_api.h
    os/windows_common/thread.h
    os/windows_common/variant.h
    os/windows_common/_.h
    os/windows_common/_c.h
    os/windows_common/_default_dll_impl.h
    os/windows_common/_file_c.h
    os/windows_common/_unicode_c.h
    os/winpr_input.h
    os/x11/x11_button.h
    os/x11/x11_exception.h
    os/x11/x11_hook.h
    os/x11/x11_keyboard.h
    os/x11/x11_message_box.h
    os/x11/x11_simple_ui_display.h
    os/x11/_x11.h
    os/_.h
    os/_application.h
    os/_c.h
    os/_impl.h
    os/_os.h
    os/_user.h
    platform/acme_str_pool.h
    platform/all.h
    platform/aura_aura.h
    platform/aura_regex.h
    platform/auto.h
    platform/auto_pointer.h
    platform/class.h
    platform/cmp.h
    platform/cmp2.h
    platform/common.h
    platform/const.h
    platform/constraint.h
    platform/debug.h
    platform/definition.h
    platform/display.h
    platform/enum.h
    platform/error.h
    platform/exclusive.h
    platform/factory.h
    platform/filestream.h
    platform/fixed_alloc.h
    platform/fixed_alloc_impl.h
    platform/flags.h
    platform/hyperlink.h
    platform/international.h
    platform/keep.h
    platform/keep_true.h
    platform/less.h
    platform/logic.h
    platform/lparam.h
    platform/main.h
    platform/message_box.h
    platform/muldiv32.h
    platform/muldiv64.h
    platform/nano_timer.h
    platform/net.h
    platform/number.h
    platform/obj_ref_dbg.h
    platform/obj_ref_dbg_impl.h
    platform/obj_typ_ctr.h
    platform/printf.h
    platform/profiler.h
    platform/regex.h
    platform/restore.h
    platform/serial.h
    platform/serial_impl.h
    platform/simple_app.h
    platform/sprintf.h
    platform/static_start.h
    platform/status.h
    platform/string_exchange.h
    platform/system.h
    platform/text.h
        primitive/datetime/millis.h
    platform/timeout.h
    platform/timer.h
    platform/timer_array.h
    platform/timer_callback.h
    platform/timer_event.h
    platform/timer_item.h
    platform/timer_task.h
    platform/title.h
    platform/trace_category.h
    platform/user_parent.h
    platform/version.h
    platform/_features.h
    platform/_generic_object_constructor_impl.h
    platform/_global.h
    platform/_impl.h
    platform/_platform.h
    primitive/api/api.h
    primitive/api/api_rotate.h
    primitive/collection/address_array.h
    primitive/collection/array.h
    primitive/collection/array_base.h
    primitive/collection/attrib_map.h
    primitive/collection/back_insert_iterator.h
    primitive/collection/base_2array.h
    primitive/collection/base_enum.h
    primitive/collection/bitset.h
    primitive/collection/bit_array.h
    primitive/collection/common.h
    primitive/collection/comparable_array.h
    primitive/collection/comparable_eq_array.h
    primitive/collection/comparable_eq_list.h
    primitive/collection/comparable_list.h
    primitive/collection/comparable_primitive_array.h
    primitive/collection/comparable_raw_array.h
    primitive/collection/composite_array.h
    primitive/collection/decl.h
    primitive/collection/deque.h
    primitive/collection/fifo_map.h
    primitive/collection/file_path_map.h
    primitive/collection/forward.h
    primitive/collection/insert_iterator.h
    primitive/collection/int_map.h
    primitive/collection/iterable.h
    primitive/collection/iterator.h
    primitive/collection/list.h
    primitive/collection/logic_array.h
    primitive/collection/map.h
    primitive/collection/map_association.h
    primitive/collection/map_to_smart_pointer.h
    primitive/collection/numeric_array.h
    primitive/collection/numeric_array_range.h
    primitive/collection/packset.h
    primitive/collection/pair.h
    primitive/collection/pointer_array.h
    primitive/collection/pointer_array_process.h
    primitive/collection/priority_queue.h
    primitive/collection/ptr_array.h
    primitive/collection/queue.h
    primitive/collection/raw_array_decl.h
    primitive/collection/runnable_array.h
    primitive/collection/set.h
    primitive/collection/sort.h
    primitive/collection/sort_array.h
    primitive/collection/sort_list.h
    primitive/collection/sort_map.h
    primitive/collection/spreadset.h
    primitive/collection/stack.h
    primitive/collection/std_iterator.h
    primitive/collection/std_pair.h
    primitive/collection/strid_map.h
    primitive/collection/stringl.h
    primitive/collection/string_array_base.h
    primitive/collection/string_iterable.h
    primitive/collection/string_list.h
    primitive/collection/string_map.h
    primitive/collection/string_to_string_map.h
    primitive/collection/template.h
    primitive/collection/unique_array.h
    primitive/collection/var_array.h
    primitive/collection/_.h
    primitive/collection/_array_base_impl.h
    primitive/collection/_array_impl.h
    primitive/collection/_array_impl2.h
    primitive/collection/_collection_impl1.h
    primitive/collection/_collection_impl2.h
    primitive/collection/_fifo_map_impl.h
    primitive/collection/_list_impl.h
    primitive/collection/_map_impl.h
    primitive/collection/_papaya.h
    primitive/collection/_papaya_array.h
    primitive/collection/_papaya_array2d_impl.h
    primitive/collection/_papaya_array_impl.h
    primitive/collection/_papaya_heap.h
    primitive/collection/_papaya_impl.h
    primitive/collection/_papaya_map.h
    primitive/collection/_papaya_map_impl.h
    primitive/collection/_papaya_weak.h
    primitive/collection/_point_array.h
    primitive/collection/_raw_array_impl.h
    primitive/collection/_raw_array_impl2.h
    primitive/collection/_sort_array_impl.h
    primitive/collection/_sort_map_impl.h
    primitive/collection/_string_array_impl.h
    primitive/comparison/binary.h
    primitive/comparison/compare.h
    primitive/comparison/equals.h
    primitive/comparison/hash.h
    primitive/comparison/less.h
    primitive/comparison/md5.h
    primitive/comparison/sign.h
    primitive/comparison/var_strict.h
    primitive/comparison/_.h
    primitive/comparison/_c.h
    primitive/datetime/date_span.h
    primitive/datetime/duration.h
    primitive/datetime/filetime.h
    primitive/datetime/filetime_span.h
    primitive/datetime/time.h
    primitive/datetime/time_span.h
    primitive/datetime/value.h
    primitive/datetime/zonetime.h
    primitive/datetime/_.h
    primitive/datetime/_c.h
    primitive/datetime/_impl.h
    primitive/geometry2d/align.h
    primitive/geometry2d/angle.h
    primitive/geometry2d/arc.h
    primitive/geometry2d/bounding_rect.h
    primitive/geometry2d/collection.h
    primitive/geometry2d/contains.h
    primitive/geometry2d/geometry.h
    primitive/geometry2d/line.h
    primitive/geometry2d/lines.h
    primitive/geometry2d/oval.h
    primitive/geometry2d/point.h
    primitive/geometry2d/point_array.h
    primitive/geometry2d/polygon.h
    primitive/geometry2d/rect.h
    primitive/geometry2d/rect_array.h
    primitive/geometry2d/shape.h
    primitive/geometry2d/shape_array.h
    primitive/geometry2d/size.h
    primitive/geometry2d/size_array.h
    primitive/geometry2d/types.h
    primitive/geometry2d/_.h
    primitive/geometry2d/_collection.h
    primitive/geometry2d/_collection_bounding_rect.h
    primitive/geometry2d/_collection_contains.h
    primitive/geometry2d/_defer.h
    primitive/geometry2d/_impl.h
    primitive/geometry2d/_rect_impl.h
    primitive/geometry2d/_size_impl.h
    primitive/geometry2d/_struct.h
    primitive/geometry3d/box.h
    primitive/geometry3d/dimension.h
    primitive/geometry3d/location.h
    primitive/geometry3d/quaternions.h
    primitive/geometry3d/_.h
    primitive/math/binary_operation.h
    primitive/math/cast.h
    primitive/math/classes.h
    primitive/math/complex.h
    primitive/math/count.h
    primitive/math/c_number.h
    primitive/math/filestream.h
    primitive/math/index.h
    primitive/math/math_clip.h
    primitive/math/math_int_biunique.h
    primitive/math/mkint_c.h
    primitive/math/natural.h
    primitive/math/number.h
    primitive/math/number_double.h
    primitive/math/number_float.h
    primitive/math/number_integer.h
    primitive/math/numeric_info.h
    primitive/math/objects.h
    primitive/math/random_number_generator.h
    primitive/math/scalar.h
    primitive/math/scalar_enum.h
    primitive/math/static_numeric_info.h
    primitive/math/std_template.h
    primitive/math/value.h
    primitive/math/_.h
    primitive/math/_impl.h
    primitive/primitive/action.h
    primitive/primitive/action_context.h
    primitive/primitive/application_bias.h
    primitive/primitive/atomic.h
    primitive/primitive/bit.h
    primitive/primitive/block.h
    primitive/primitive/cflag.h
    primitive/primitive/change.h
    primitive/primitive/collection.h
    primitive/primitive/collection_file.h
    primitive/primitive/command.h
    primitive/primitive/compare_pred.h
    primitive/primitive/context_object.h
    primitive/primitive/edit.h
    primitive/primitive/element_array.h
    primitive/primitive/enumeration.h
    primitive/primitive/eobject.h
    primitive/primitive/estatus.h
    primitive/primitive/factory.h
    primitive/primitive/function_pointer.h
    primitive/primitive/future.h
    primitive/primitive/id.h
    primitive/primitive/id_array.h
    primitive/primitive/id_space.h
    primitive/primitive/interlocked_long.h
    primitive/primitive/interlocked_long_pulse.h
    primitive/primitive/layered.h
    primitive/primitive/logic.h
    primitive/primitive/malloc.h
    primitive/primitive/map.h
    primitive/primitive/match.h
    primitive/primitive/math_math.h
    primitive/primitive/matter.h
    primitive/primitive/member.h
    primitive/primitive/memory.h
    primitive/primitive/memory_base.h
    primitive/primitive/memory_container.h
    primitive/primitive/natural.h
    primitive/primitive/number.h
    primitive/primitive/papaya.h
    primitive/primitive/pointer.h
    primitive/primitive/pointer2.h
    primitive/primitive/pred_future.h
    primitive/primitive/pred_method.h
    primitive/primitive/primitive_update.h
    primitive/primitive/procedure.h
    primitive/primitive/promise.h
    primitive/primitive/promise1.h
    primitive/primitive/property.h
    primitive/primitive/property_set.h
    primitive/primitive/property_set_papaya.h
    primitive/primitive/request_interface.h
    primitive/primitive/request_signal.h
    primitive/primitive/runnable.h
    primitive/primitive/shared_memory.h
    primitive/primitive/simple_object.h
    primitive/primitive/source.h
    primitive/primitive/stick.h
    primitive/primitive/str.h
    primitive/primitive/trait.h
    primitive/primitive/traits.h
    primitive/primitive/trait_pred.h
    primitive/primitive/type.h
    primitive/primitive/uid.h
    primitive/primitive/update.h
    primitive/primitive/util.h
    primitive/primitive/value.h
    primitive/primitive/var.h
    primitive/primitive/var2.h
    primitive/primitive/virtual_memory.h
    primitive/primitive/work.h
    primitive/primitive/_.h
    primitive/primitive/_context_object_impl.h
    primitive/primitive/_c_memory.h
    primitive/primitive/_defer.h
    primitive/primitive/_factory_impl.h
    primitive/primitive/_factory_prefix.h
    primitive/primitive/_id_impl.h
    primitive/primitive/_impl.h
    primitive/primitive/_memory.h
    primitive/primitive/_papaya.h
    primitive/primitive/_papaya_impl.h
    primitive/primitive/_var_impl.h
    primitive/string/base64.h
    primitive/string/bstr.h
    primitive/string/bstring.h
    primitive/string/ch.h
    primitive/string/ch_class.h
    primitive/string/composite.h
    primitive/string/from_integer.h
    primitive/string/hex.h
    primitive/string/international.h
    primitive/string/international2.h
    primitive/string/parse.h
    primitive/string/static_string.h
    primitive/string/stdstring.h
    primitive/string/stringtow.h
    primitive/string/string_file.h
    primitive/string/string_inst.h
    primitive/string/string_wide_conversion.h
    primitive/string/sz.h
    primitive/string/tokenizer.h
    primitive/string/to_integer.h
    primitive/string/x/x_charcategory.h
    primitive/string/x/x_charcategory2.h
    primitive/string/x/x_charcategory_names.h
    primitive/string/x/x_defines.h
    primitive/string/x/x_encodings.h
    primitive/string/x/x_tables.h
    primitive/string/x.h
    primitive/string/_.h
    primitive/string/_base.h
    primitive/string/_base_impl.h
    primitive/string/_c.h
    primitive/string/_compare.h
    primitive/string/_compare_impl.h
    primitive/string/_conv.h
    primitive/string/_conv_ansi.h
    primitive/string/_conv_ansi_impl.h
    primitive/string/_c_impl.h
    primitive/string/_c_inline.h
    primitive/string/_c_str.h
    primitive/string/_c_str_impl.h
    primitive/string/_c_trait.h
    primitive/string/_c_trait_ansi.h
    primitive/string/_c_trait_ansi_impl.h
    primitive/string/_c_trait_impl.h
    primitive/string/_c_trait_wd16.h
    primitive/string/_c_trait_wd16_impl.h
    primitive/string/_c_trait_wd32.h
    primitive/string/_c_trait_wd32_impl.h
    primitive/string/_c_trait_wide.h
    primitive/string/_c_trait_wide_impl.h
    primitive/string/_c_unicode.h
    primitive/string/_defer.h
    primitive/string/_impl.h
    primitive/string/_impl_prio.h
    primitive/string/_international.h
    primitive/string/_natural.h
    primitive/string/_str.h
    primitive/string/_string_wide.h
    primitive/string/_str_impl.h
    primitive/string/_trait.h
    primitive/string/_trait_ansi.h
    primitive/string/_trait_ansi_impl.h
    primitive/string/_trait_impl.h
    primitive/string/_trait_wd16.h
    primitive/string/_trait_wd16_impl.h
    primitive/string/_trait_wd32.h
    primitive/string/_trait_wd32_impl.h
    primitive/string/_uhash.h
    primitive/string/_unicode.h
    primitive/string/_unicode_impl.h
    primitive/string/__c_ansi.h
    primitive/string/__c_ansi_impl.h
    primitive/string/__c_wd16.h
    primitive/string/__c_wd16_impl.h
    primitive/string/__c_wd32.h
    primitive/string/__c_wd32_impl.h
    primitive/string/__c_wide.h
    primitive/string/__c_wide_impl.h
    primitive/string/___ch_impl.h
    procedure.h
    process/process.h
    process/process_bidi_pipe.h
    process/process_pipe.h
    template/list.h
    update.h
    user/os_colors.h
    user/_.h
    user/_const.h
    user/_const_key.h
    version/version.config.h
    version/version.h
    _.h
    _defer.h
    _start.h
    )


if(UWP)
    list(APPEND acme_source
        exception/winrt/engine_winrt.cpp
        node/uwp/error.cpp
        node/uwp/factory_exchange.cpp
        node/uwp/file.cpp
        node/uwp/file_find.cpp
        node/uwp/native_buffer.cpp
        node/uwp/timer.cpp
        node/uwp/util.cpp
        os/uwp/_.cpp
        os/uwp/_os_metrowin.cpp
        os/uwp/application_system_run.cpp
        os/uwp/aura.cpp
        os/uwp/debug.cpp
        os/uwp/direct2d_tls.cpp
        os/uwp/dpi.cpp
        os/uwp/dummy_ipc.cpp
        os/uwp/exception_engine.cpp
        os/uwp/file.cpp
        os/uwp/file_memory_map.cpp
        os/uwp/graphics.cpp
        os/uwp/language.cpp
        os/uwp/lock.cpp
        os/uwp/main.cpp
        os/uwp/multithreading.cpp
        os/uwp/os_message_box.cpp
        os/uwp/process.cpp
        os/uwp/sockets.cpp
        os/uwp/time.cpp
        os/uwp/user.cpp)

    list(APPEND acme_source
        node/uwp/exception.h
        node/uwp/factory_exchange.h
        node/uwp/file.h
        node/uwp/file_find.h
        node/uwp/native_buffer.h
        node/uwp/net/net_address.h
        node/uwp/_.h
        node/uwp/_uwp.h
        )

endif()


if(WIN32)

    list(APPEND acme_source
        node/windows/console.cpp
        node/windows/factory_exchange.cpp
        node/windows/file.cpp
        node/windows/file_find.cpp
        node/windows/pipe.cpp
        node/windows/registry.cpp
        node/windows/serial.cpp
        node/windows/timer.cpp
        node/windows/trace.cpp
        node/windows/uac_tools.cpp
        node/windows/windows.cpp
        node/windows/windows_desktop.cpp
        os/windows/_.cpp
        os/windows/ansi_file.cpp
        os/windows/api.cpp
        os/windows/application.cpp
        os/windows/callstack.cpp
        os/windows/debug.cpp
        os/windows/dir.cpp
        os/windows/environment_variable.cpp
        os/windows/exception_engine.cpp
        os/windows/extract_icon.cpp
        os/windows/file.cpp
        os/windows/gdiplus.cpp
        os/windows/internal.cpp
        os/windows/itemidlist.cpp
        os/windows/language.cpp
        os/windows/library.cpp
        os/windows/list_serial_ports.cpp
        os/windows/local_memory_map.cpp
        os/windows/lock.cpp
        os/windows/main.cpp
        os/windows/message_loop.cpp
        os/windows/printer.cpp
        os/windows/process.cpp
        os/windows/registry.cpp
        os/windows/simple_app.cpp
        os/windows/thread.cpp
        os/windows/time.cpp
        os/windows/user.cpp
        os/windows/util.cpp
        os/windows/windowing.cpp)

    list(APPEND acme_source
        node/windows/base/factory_exchange.h
        node/windows/base/implementation.h
        node/windows/base/print_job.h
        node/windows/base/_windows.h
        node/windows/console.h
        node/windows/exception.h
        node/windows/factory_exchange.h
        node/windows/file.h
        node/windows/file_find.h
        node/windows/pipe.h
        node/windows/registry.h
        node/windows/serial.h
        node/windows/uac_tools.h
        node/windows/user.h
        node/windows/_.h
        node/windows/_node_windows.h
        node/windows/_node_windows_private.h
        node/windows/_windows.h
        )
else()

    list(APPEND acme_source
        os/cross/windows/user.cpp
        os/cross/windows/datetime.cpp

        #os/cross/windows/crt.cpp
        #os/cross/windows/crt_debug.cpp
            #os/cross/windows/datetime.cpp
            #os/cross/windows/error.cpp
            #os/cross/windows/locale.cpp
        #os/cross/windows/shared_memory.cpp
        #os/cross/windows/thread_local_storage.cpp
        #os/cross/windows/ansios_message_loop.cpp
        #os/cross/windows/user.cpp
        #os/cross/windows/windows.cpp
        #os/cross/windows/e.h
        #os/cross/windows/message_box.h
        #os/cross/windows/windows.h
        #os/cross/windows/windows_base.h
        #os/cross/windows/windows_base_tsd.h
        #os/cross/windows/windows_common_controls.h
        #os/cross/windows/windows_crt.h
        #os/cross/windows/windows_crtdefs.h
        #os/cross/windows/windows_defs.h
        #os/cross/windows/windows_errno.h
        #os/cross/windows/windows_error.h
        #os/cross/windows/windows_file.h
        #os/cross/windows/windows_gdi.h
        #os/cross/windows/windows_guid_def.h
        #os/cross/windows/windows_internals.h
        #os/cross/windows/windows_mmeapi.h
        #os/cross/windows/windows_mmsystem.h
        #os/cross/windows/windows_nls.h
        #os/cross/windows/windows_nt.h
        #os/cross/windows/windows_ntstatus.h
        #os/cross/windows/windows_ole_automation.h
        #os/cross/windows/windows_shared_memory.h
        #os/cross/windows/windows_thread.h
        #os/cross/windows/windows_thread_impl.h
        #os/cross/windows/windows_time.h
        #os/cross/windows/windows_types.h
        #os/cross/windows/windows_user.h
        #os/cross/windows/windows_wincon.h
        #os/cross/windows/windows_winnt.h
        #os/cross/windows/_.h
        #os/cross/_.h
        #os/cross.h
        )

endif()


if(WIN32 OR UWP)

    list(APPEND acme_source
        os/windows_common/_dll.cpp
        os/windows_common/aura.cpp
        os/windows_common/base.cpp
        os/windows_common/bstring.cpp
        os/windows_common/com.cpp
        os/windows_common/debug.cpp
        os/windows_common/file.cpp
        os/windows_common/file_c.cpp
        os/windows_common/graphics.cpp
        os/windows_common/net.cpp
        os/windows_common/thread.cpp
        os/windows_common/time.cpp
        os/windows_common/unicode.cpp)

endif()

if(LINUX)
    list(APPEND acme_source
        node/linux/console.cpp
        node/linux/dumpinit.cpp
        node/linux/error.cpp
        node/linux/exception.cpp
        node/linux/factory_exchange.cpp
        node/linux/file.cpp
        node/linux/linux.cpp
        node/linux/root_tools.cpp
#        node/linux/shell.cpp
#        node/linux/shell_linux.cpp
        node/linux/stdio_file.cpp
        node/linux/thread.cpp
        node/linux/trace.cpp
        node/linux/util.cpp
        os/linux/_.cpp
        os/linux/callstack.cpp
        os/linux/cross_win_file.cpp
        os/linux/cross_win_gdi.cpp
        os/linux/debug.cpp
        os/linux/exception_engine.cpp
        os/linux/file.cpp
        os/linux/gdk.cpp
        os/linux/graphics.cpp
        os/linux/linux.inl
        os/linux/list_serial_ports.cpp
        os/linux/lock.cpp
        os/linux/multithreading.cpp
        os/linux/os.cpp
        os/linux/process.cpp
        os/linux/process_pid.cpp
        os/linux/simple_app.cpp
        os/linux/time.cpp
        os/linux/user.cpp
        os/linux/win_base.cpp)

    list(APPEND acme_source
        node/linux/application.h
        node/linux/console.h
        node/linux/factory_exchange.h
        node/linux/file.h
        node/linux/internal.h
        node/linux/root_tools.h
        node/linux/stdio_file.h
        node/linux/thread.h
        node/linux/_.h
        node/linux/_linux.h
        os/linux/cross_win_file.h
        os/linux/cross_win_gdi.h
        os/linux/cross_win_gdi_internal.h
        os/linux/debug.h
        os/linux/exception_engine.h
        os/linux/file.h
        os/linux/gdk.h
        os/linux/linux_linux.h
        os/linux/process.h
        os/linux/user.h
        os/linux/user_private.h
        os/linux/_.h
        os/linux/_c.h
        os/linux/_linux.h
        os/linux/_user.h
        )
endif()

if(MACOS)
    list(APPEND acme_source
        os/cross/uwp/cross_metrowin_user.cpp
        os/cross/uwp/metrowin_user.cpp
        node/macos/application.cpp
        node/macos/factory_exchange.cpp
        node/macos/file.cpp
        node/macos/main.cpp
        node/macos/stdio_file.cpp
        node/macos/thread.cpp
        node/macos/trace.cpp
        node/macos/util.cpp
        os/macos/_.cpp
        os/macos/application_system_run.cpp
        os/macos/clipboard.cpp
        os/macos/cross_win.cpp
        os/macos/cross_win_file.cpp
        os/macos/debug.cpp
        os/macos/exception_engine.cpp
        os/macos/file.cpp
        os/macos/file.mm
        os/macos/graphics.cpp
        os/macos/list_serial_ports.cpp
        os/macos/lock.cpp
        os/macos/MessageBoxA.cpp
        os/macos/mm.mm
        os/macos/mm_graphics.mm
        os/macos/mm_user.mm
        os/macos/mmos.mm
        os/macos/NSPasteboard++.mm
        os/macos/os.cpp
        os/macos/process.cpp
        os/macos/process_pid.cpp
        os/macos/time.cpp
        os/macos/user.cpp
        os/macos/win_base.cpp
        os/macos/windowing.cpp
        os/macos/winpr_keycode.cpp)

    list(APPEND acme_source
            node/macos/application.h
            node/macos/factory_exchange.h
            node/macos/file.h
            node/macos/stdio_file.h
            node/macos/thread.h
            node/macos/user.h
            node/macos/_.h
            node/macos/_macos.h
            node/macos/_mm.h
            os/macos/cross_win_gdi.h
            os/macos/exception_engine.h
            os/macos/file.h
            os/macos/graphics_mm.h
            os/macos/internal.h
            os/macos/macos.h
            os/macos/main.h
            os/macos/mmos.h
            os/macos/mm_oswindow.h
            os/macos/os.h
            os/macos/process_c.h
            os/macos/user.h
            os/macos/windowing.h
            os/macos/windowing_c.h
            os/macos/window_impl.h
            os/macos/_.h
            os/macos/_c.h
            os/macos/_macos.h
            os/macos/_mm.h
            )

endif()


if(IOS)
    list(APPEND acme_source
            os/cross/uwp/cross_metrowin_user.cpp
            os/cross/uwp/metrowin_user.cpp
            node/ios/exception.cpp
            node/ios/factory_exchange.cpp
            node/ios/file.cpp
            node/ios/ios.cpp
            node/ios/ip_enum.cpp
            node/ios/main.cpp
            node/ios/os_context.cpp
            node/ios/plane_system.cpp
            node/ios/shell.cpp
            node/ios/thread.cpp
            node/ios/trace.cpp
            node/ios/util.cpp
            os/ios/application_system_run.cpp
            os/ios/aura.cpp
            os/ios/base_user.cpp
            os/ios/cross_win.cpp
            os/ios/cross_win_file.cpp
            os/ios/crypt.cpp
            os/ios/debug.cpp
            os/ios/error.cpp
            os/ios/exception_engine.cpp
            os/ios/file.cpp
            os/ios/fontopus.cpp
            os/ios/graphics.cpp
            os/ios/language.cpp
            os/ios/launcher.cpp
            os/ios/library.cpp
            os/ios/lock.cpp
            os/ios/MessageBoxA_W.mm
            os/ios/mm.mm
            os/ios/mm_cross_gdi.mm
            os/ios/mm_graphics.mm
            os/ios/mm_thread.mm
            os/ios/mm_user.mm
            os/ios/multithreading.cpp
            os/ios/oswindow_data.cpp
            os/ios/process.cpp
            os/ios/process_pid.cpp
            os/ios/simple_shell_launcher.cpp
            os/ios/small_ipca_channel.cpp
            os/ios/time.cpp
            os/ios/user.cpp
            os/ios/win_base.cpp
            os/ios/window.cpp
            "os/ios/window_boot 2.h"
            os/ios/windowing.cpp
            )

    list(APPEND acme_source
            node/ios/factory_exchange.h
            node/ios/file.h
            node/ios/implementation.h
            node/ios/internal.h
            node/ios/ip_enum.h
            node/ios/os_context.h
            node/ios/plane_system.h
            node/ios/shell.h
            node/ios/state.h
            node/ios/thread.h
            node/ios/_.h
            node/ios/_ios.h
            node/ios/_m.h
            node/ios/_mm.h
            )

endif()


if(APPLE)
    list(APPEND acme_source
        timer.mm
        exception/mm.mm
        os/cross/uwp/cross_metrowin_user.cpp
        os/cross/uwp/metrowin_user.cpp
        node/apple/apple_timer.cpp
        os/apple/_.cpp
        os/apple/_apple.mm
        os/apple/DDInvocationGrabber.mm
        os/apple/debug.cpp
        os/apple/exe_path.cpp
        os/apple/graphics.cpp
        os/apple/image_gif.cpp
        os/apple/main.cpp
        os/apple/multihreading.cpp
        os/apple/ns_exception.cpp
        os/apple/NSObject+DDExtensions.mm
        os/apple/NSString+SymlinksAndAliases.mm
        os/apple/process.cpp
        os/apple/time.cpp
        os/apple/UncaughtExceptionHandler.mm)
endif()

if(ANDROID)
    list(APPEND acme_source
        os/cross/uwp/cross_metrowin_user.cpp
        os/cross/uwp/metrowin_user.cpp
        node/android/android.cpp
        node/android/android1.cpp
        node/android/error.cpp
        node/android/exception.cpp
        node/android/factory_exchange.cpp
        node/android/file.cpp
        node/android/main.cpp
        node/android/process.cpp
        node/android/thread.cpp
        node/android/trace.cpp
        node/android/util.cpp
        os/android/_bind_app.cpp
        os/android/_bind_impact.cpp
        os/android/_os_android.cpp
        os/android/_os_impl.cpp
        os/android/_os_object.cpp
        os/android/application_system_run.cpp
        os/android/aura.cpp
        os/android/c.cpp
        os/android/debug.cpp
        os/android/dir.cpp
        os/android/exception_engine.cpp
        os/android/file.cpp
        os/android/graphics.cpp
        os/android/jni_launcher.cpp
        os/android/language.cpp
        os/android/launcher.cpp
        os/android/library.cpp
        os/android/locale.cpp
        os/android/lock.cpp
        os/android/main_android.cpp
        os/android/process.cpp
        os/android/process_pid.cpp
        os/android/win_base.cpp
            )

endif()


if(SOLARIS)
    list(APPEND acme_source
        os/solaris/solaris.cpp
        os/solaris/solaris_cairo_keep.cpp
        os/solaris/solaris_cross_win_file.cpp
        os/solaris/solaris_cross_win_gdi.cpp
        os/solaris/solaris_display.cpp
        os/solaris/solaris_file.cpp
        os/solaris/solaris_file_watcher.cpp
        os/solaris/solaris_http.cpp
        os/solaris/solaris_http_lib.cpp
        os/solaris/solaris_launcher.cpp
        os/solaris/solaris_library.cpp
        os/solaris/solaris_lock.cpp
        os/solaris/solaris_message_loop.cpp
        os/solaris/solaris_process.cpp
        os/solaris/solaris_process_pid.cpp
        os/solaris/solaris_simple_shell_launcher.cpp
        os/solaris/solaris_simple_ui.cpp
        os/solaris/solaris_small_ipca_channel.cpp
        os/solaris/solaris_thread.cpp
        os/solaris/solaris_win_base.cpp
        os/solaris/solaris_window.cpp
        os/solaris/solaris_window_xlib.cpp)
endif()


if(LINUX OR APPLE OR SOLARIS)
    list(APPEND acme_source
        node/posix/pipe.cpp
        node/posix/serial.cpp
        node/node_serial.cpp
        os/posix/base_file.cpp
        os/posix/local_memory_map.cpp
        os/posix/pthread.cpp
        os/posix/thread.cpp
        os/posix/time.cpp
        os/posix/timer.cpp
        os/winpr_keycode.cpp
        os/winpr_scancode.cpp

        )

    list(APPEND acme_source
            node/posix/pipe.h
            node/posix/serial.h
            node/posix/_posix.h
            )
endif()


if(LINUX)
    list(APPEND acme_source
        os/x11/debug.cpp
        os/x11/x11_button.cpp
        os/x11/x11_hook.cpp
        os/x11/x11_keyboard.cpp
        os/x11/x11_message_box.cpp
        os/x11/x11_simple_ui_display.cpp
        os/x11/x11_windowing.cpp
        os/x11/x11_xrender.cpp
        os/ansios/binreloc.cpp)
endif()




if (MSVC)
    set(LIBCXX_TARGETING_MSVC ON)
else()
    set(LIBCXX_TARGETING_MSVC OFF)
endif()


add_library(acme SHARED ${acme_source} primitive/primitive/estatus.cpp primitive/datetime/micros.h primitive/datetime/nanos.h primitive/datetime/secs.h)

target_precompile_headers(acme PRIVATE framework.h)

set_target_properties(acme PROPERTIES LINKER_LANGUAGE CXX)

if (MSVC)
    target_compile_options(acme PRIVATE "/MD$<$<CONFIG:Debug>:d>")
    target_link_options(acme PRIVATE "/DEFAULTLIB:msvcrt$<$<CONFIG:Debug>:d>")
    target_link_options(acme PRIVATE "/IMPLIB:${LIBRARY_OUTPUT_PATH}/acme.lib")
    target_link_options(acme PRIVATE "/DEF:${CMAKE_CURRENT_SOURCE_DIR}/acme.def")
    target_link_libraries(acme PRIVATE zlib dbghelp imagehlp dwmapi Setupapi Windowscodecs Winmm ws2_32 Crypt32 Normaliz version Secur32 gdiplus Shlwapi Imm32.lib)
elseif(LINUX)
    #pkg_check_modules(PKGCONFIG glib-2.0 gtk+-3.0 gdk-3.0 appindicator-0.1)
    pkg_check_modules(PKGCONFIG glib-2.0 freetype2 gtk+-3.0 gdk-3.0)
    target_compile_options(acme PRIVATE -fpermissive)
    target_compile_options(acme PRIVATE ${PKGCONFIG_CFLAGS})
    #target_compile_options(acme PRIVATE -std=c++14)
    #target_link_options(acme PRIVATE ${GTK_LDFLAGS})
    target_link_options(acme PRIVATE -Wl,-rpath=\$ORIGIN)
    target_link_libraries(acme PRIVATE z dl pthread ncurses X11 Xrender Xinerama Xft ${PKGCONFIG_LIBRARIES})
    target_link_options(acme PRIVATE -Wl,-z,defs)
    message("PKGCONFIG_LIBRARIES is " ${PKGCONFIG_LIBRARIES})
endif()

target_link_directories(acme PRIVATE ${LIBRARY_OUTPUT_PATH})
target_link_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../../../archive/storage-${PLATFORM_NAME}/library/x64/basis)
target_link_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../../../archive/storage-${PLATFORM_NAME}/third/library/x64/basis)


target_include_directories(acme PRIVATE .)
target_include_directories(acme PRIVATE $ENV{HOME}/__config)
target_include_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../..)
target_include_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/..)
target_include_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../../../source)
target_include_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../../../source/app)
target_include_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../../../source/app/_include)
target_include_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../../../source/include)
target_include_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../../../archive/platform-${PLATFORM_NAME})
target_include_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../../../archive/platform-${PLATFORM_NAME}/_include)
target_include_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../../../archive/third-${PLATFORM_NAME}/include)
target_include_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../../../archive/third-${PLATFORM_NAME}/third/include)
target_include_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/../../../archive/third-${PLATFORM_NAME}/third/include/include)
target_include_directories(acme PRIVATE ${CMAKE_CURRENT_SOURCE_DIR})


target_compile_definitions(acme PRIVATE _ACME_LIBRARY)
target_compile_definitions(acme PRIVATE UNICODE)
target_compile_definitions(acme PRIVATE _UNICODE)


file(GLOB third_binaries
        "${CMAKE_CURRENT_SOURCE_DIR}/../../../archive/storage-${PLATFORM_NAME}/third/binary/x64/basis/*"
        )


file(COPY ${third_binaries} DESTINATION ${EXECUTABLE_OUTPUT_PATH})



file(GLOB storage_binaries
        "${CMAKE_CURRENT_SOURCE_DIR}/../../../archive/storage-${PLATFORM_NAME}/binary/x64/basis/*"
        )


file(COPY ${storage_binaries} DESTINATION ${EXECUTABLE_OUTPUT_PATH})


